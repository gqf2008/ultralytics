# Ultralytics ğŸš€ AGPL-3.0 License - https://ultralytics.com/license

[package]
name = "yolov8-rs"
version = "0.1.0"
edition = "2021"

[features]
default = []
gpu = ["wgpu", "pollster", "futures", "bytemuck"]


# å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶
[[bin]]
name = "yolov8"            # å›¾ç‰‡æ£€æµ‹: cargo run --bin yolov8
path = "src/bin/yolov8.rs"

[[bin]]
name = "sentinel"         # æ•°å­—å«å…µ RTSP å®æ—¶ç›‘æ§ (macroquad): cargo run --bin sentinel-mq --release
path = "src/bin/sentinel.rs"

# ç¤ºä¾‹ç¨‹åº
[[example]]
name = "affine_transform_demo"
path = "examples/affine_transform_demo.rs"

[[example]]
name = "affine_benchmark"
path = "examples/affine_benchmark.rs"

[[example]]
name = "affine_gpu_benchmark"
path = "examples/affine_gpu_benchmark.rs"
required-features = ["gpu"]

[[example]]
name = "gpu_simple_demo"
path = "examples/gpu_simple_demo.rs"
required-features = ["gpu"]

[[example]]
name = "gpu_image_test"
path = "examples/gpu_image_test.rs"
required-features = ["gpu"]

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
clap = { version = "4.2.4", features = ["derive"] }
image = { version = "0.25.2" }
imageproc = { version = "0.25.0" }
ndarray = { version = "0.16" }
ort = { version = "2.0.0-rc.5", features = [
    "cuda",
    "tensorrt",
    "download-binaries",
    "copy-dylibs",
    "half",
] }
rusttype = { version = "0.9.3" }
anyhow = { version = "1.0.75" }
regex = { version = "1.5.4" }
rand = { version = "0.8.5" }
chrono = { version = "0.4.30" }
half = { version = "2.3.1" }
dirs = { version = "5.0.1" }
ureq = { version = "2.9.1" }
ab_glyph = "0.2.29"

# RTSP è§†é¢‘æµå¤„ç† (ä½¿ç”¨ vcpkg é™æ€åº“)
ez-ffmpeg = { version = "0.5.6", features = ["static"] }

# é«˜æ€§èƒ½å›¾åƒç¼©æ”¾
fast_image_resize = { version = "5.3.0" }

# 2Dæ¸¸æˆæ¡†æ¶ (GPUåŠ é€Ÿæ¸²æŸ“)
macroquad = "0.4"

# egui UIæ¡†æ¶é›†æˆ
egui-macroquad = "0.17"

# çº¿ç¨‹é—´é€šä¿¡
crossbeam-channel = "0.5.15"
crossbeam-skiplist = "0.1.3"

# é«˜æ€§èƒ½å†…å­˜åˆ†é…å™¨ (æ›¿ä»£ç³»ç»Ÿé»˜è®¤åˆ†é…å™¨)
mimalloc = { version = "0.1", default-features = false }

# Windows åŸç”Ÿ API (å‰ªè´´æ¿)
[target.'cfg(windows)'.dependencies]
windows = { version = "0.58", features = ["Win32_System_DataExchange", "Win32_System_Memory", "Win32_Foundation"] }

# å…¨å±€é™æ€å˜é‡æ”¯æŒ
once_cell = "1.20"
phf = { version = "0.13.1", features = ["macros"] }

# JSONåºåˆ—åŒ–
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# GPUåŠ é€Ÿ (å¯é€‰åŠŸèƒ½)
wgpu = { version = "22.0", optional = true }
pollster = { version = "0.3", optional = true }
futures = { version = "0.3", optional = true }
bytemuck = { version = "1.14", optional = true, features = ["derive"] }

[build-dependencies]
phf = { version = "0.13.1", default-features = false }
phf_codegen = "0.13.1"